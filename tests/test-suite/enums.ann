enum test_enum {
    A,
    B,
    C
}

fn to_test_enum(:__identifier) -> test_enum {
    return $0;
}

assert_equal(to_test_enum(.A), test_enum.A);
assert_not_equal(to_test_enum(.B), test_enum.A);
assert_equal(to_integer(to_test_enum(.B)), 1);
assert_equal(to_integer(runtime_cast(to_test_enum(.C))), 2);

print(to_string(to_test_enum(.C)));
print(to_string(test_enum.B));

let arg1 = .B;
let carg1: test_enum = runtime_cast(arg1);

inline fn implicit_cast(test_enum) ~> bool => true;
let v1: test_enum = (runtime_cast(false) && .A || .B);
assert_equal(v1, .B);
let v2: test_enum = (runtime_cast(true) && .A || .B);
assert_equal(v2, .A);